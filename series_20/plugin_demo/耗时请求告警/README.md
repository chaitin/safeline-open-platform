# 版本要求

`>= 19.07.001`

# 用途描述

筛选出请求中耗时超过 0.5 秒的请求，每隔 5 秒以插件日志的形式告警，内容包括：报告用户 IP、目标站点，目标路径以及平均耗时。5 秒内重复的请求（IP，目标站点，目标路径相同视为重复）只汇报一次。

# 适用场景

通常耗时的请求会给服务器带来更大的压力，本插件用于帮助客户筛选出对网站造成压力的请求，帮助客户排查问题（恶意请求 or 正常现象）

# 已知缺陷 

- 暂不支持 AVG 函数，因此暂时使用 `SUM(time)/COUNT(ip)` 作为替代

# 性能参数

- 单机版单核最大 QPS：20000

# 可调整参数

- `arg_threshold` 浮点数，请求耗时阈值，耗时超过该值的请求会被记录，单位为秒
- `arg_period` 整数，统计周期，统一周期内地重复请求只回报一次，单位为秒

即：筛选出请求中耗时超过 `arg_threshold` 秒的请求，每隔 `arg_period` 秒以插件日志的形式告警，`arg_period` 秒内重复的请求（IP，目标站点，目标路径相同视为重复）只汇报一次。
